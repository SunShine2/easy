<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js\view.js - EasyTouch</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="EasyTouch"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/$.EasyTouch.html">$.EasyTouch</a></li>
            
                <li><a href="..&#x2F;classes/$.EasyTouch.Model.html">$.EasyTouch.Model</a></li>
            
                <li><a href="..&#x2F;classes/$.EasyTouch.ModelList.html">$.EasyTouch.ModelList</a></li>
            
                <li><a href="..&#x2F;classes/$.EasyTouch.Page.html">$.EasyTouch.Page</a></li>
            
                <li><a href="..&#x2F;classes/$.EasyTouch.View.html">$.EasyTouch.View</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/EasyTouch.html">EasyTouch</a></li>
            
                <li><a href="..&#x2F;modules/EasyTouch-Model.html">EasyTouch-Model</a></li>
            
                <li><a href="..&#x2F;modules/EasyTouch-ModelList.html">EasyTouch-ModelList</a></li>
            
                <li><a href="..&#x2F;modules/EasyTouch-Page.html">EasyTouch-Page</a></li>
            
                <li><a href="..&#x2F;modules/EasyTouch-View.html">EasyTouch-View</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js\view.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * EasyTouch
 * @author: youxiao@alibaba-inc.com
 * @version: 0.0.1
 * @module EasyTouch-View
 *&#x2F;
;(function(){
    &#x2F;**
     $.EasyTouch.View，MVC中的View模块，可以独立于EasyTouch运行

            var View = $.EasyTouch.View.extend({
                container: &#x27;&lt;li&gt;&lt;&#x2F;li&gt;&#x27;,
                events: {
                    &#x27;.et-del&#x27;: {
                        tap: &#x27;del&#x27;
                    }
                },
                init: function(){
                },
                del: function(e){
                }
            });
            new View();

     @class $.EasyTouch.View
     @extends $.Base
     @constructor
     **&#x2F;
    $.EasyTouch.View = $.Base.build(&#x27;$.EasyTouch.View&#x27;, {
        &#x2F;**
         * [需要重写]View的id
         * @property id
         * @type String
         * @optional
         *&#x2F;
        id: undefined,
        &#x2F;**
         * [需要重写]View的容器
         * @property container
         * @type String|Node|HTMLElement
         *&#x2F;
        container: undefined,
        &#x2F;**
         * [需要重写]EasyTouch.Model的实例，&#x60;render&#x60;方法默认使用这个model获取数据
         * @property model
         * @type Object
         * @optional
         *&#x2F;
        model: undefined,
        &#x2F;**
         * [需要重写]View的模版，&#x60;render&#x60;方法默认使用这个作为模版
         * @property tpl
         * @type String
         * @optional
         *&#x2F;
        tpl: undefined,
        &#x2F;**
         * [需要重写]代理的事件列表，&#x60;handler&#x60;可是一个字符串也可以是一个&#x60;function&#x60;，当是字符串时，将访问&#x60;this[&#x27;nav&#x27;]&#x60;
         *
         *      {
         *          &#x27;#contariner header&#x27;: {
         *              tap: &#x27;nav&#x27;,
         *          },
         *          &#x27;#contariner&#x27;: {
         *              tap: function(){}
         *          },
         *          &#x2F;&#x2F;当选择器是空的时，为本身
         *          &#x27;&#x27;: function(){
         *              tap: function(){}
         *          }
         *      }
         *
         * @property events
         * @type Object
         * @optional
         *&#x2F;
        events: {},
        &#x2F;**
         * View的dom容器
         * @property el
         * @type HTMLElement
         *&#x2F;
        el: undefined,
        &#x2F;**
         * View的$dom容器
         * @property $el
         * @type Node
         *&#x2F;
        $el: undefined,
        &#x2F;**
         * 对&#x60;$.EasyTouch.View.prototype&#x60;的引用
         * @property super
         * @type Object
         *&#x2F;

        initializer: function(options){
            this.id = this.id || (&#x27;$.EasyTouch.View.&#x27; + new Date().getTime());
            console.log(&#x27;[EasyTouch.View] &#x27;+this.id+&#x27; initializer&#x27;, arguments);
            var container = this.container;
            if(container.tagName){
                this.$el = $(container);
                this.el = container;
            &#x2F;&#x2F;$(&#x27;div&#x27;) zepto is $.zepto.Z &#x2F; jquery is $
            }else if(container instanceof $ || container instanceof $.zepto.Z){
                this.$el = container;
                this.el = container[0];
            &#x2F;&#x2F;&#x27;.list li&#x27; or &#x27;&lt;li class=&quot;xxx&quot;&gt;&lt;&#x2F;li&gt;&#x27;
            }else{
                this.$el = $(container);
                this.el = this.$el[0];
            }
            this.delegateEvents(this.events);
            this.init(options);
        },
        &#x2F;**
         * 初始化时自动执行
         * @method init
         *&#x2F;
        init: function(){
            console.log(&#x27;[EasyTouch.View] &#x27;+this.id+&#x27; init&#x27;, arguments);
        },
        &#x2F;**
         * 模版渲染，默认使用mustache
         * @method render
         * @chainable
         *&#x2F;
        render: function(){
            if(window.Mustache){
                this.$el.html(Mustache.to_html(this.tpl, this.model.toJSON()));
            }
            return this;
        },
        &#x2F;**
         * 绑定事件，建议使用更方便的配置&#x60;events&#x60;属性的方式
         *
         *      view.delegateEvents({
         *          &#x27;#contariner&#x27;: {
         *              tap: function(){}
         *          }
         *      });
         *
         * @method delegateEvents
         * @param {Object} events
         * @chainable
         *&#x2F;
        delegateEvents: function(events){
            if (!events){
                return this;
            }
            var _this = this;
            this.undelegateEvents();
            $.each(events, function(selector, methods){
                $.each(methods, function(type, handle){
                    if (typeof handle !== &#x27;function&#x27;){
                        handle = _this[handle];
                    }
                    var proxyfn = function(e){
                        handle.apply(_this, [e, this]);
                    };
                    type += &#x27;.delegateEvents&#x27; + _this.id;
                    if (selector === &#x27;&#x27;) {
                        _this.$el.bind(type, proxyfn);
                    } else {
                        _this.$el.delegate(selector, type, proxyfn);
                    }
                });
            });
            return this;
        },
        &#x2F;**
         * 解绑所有事件
         * @method undelegateEvents
         * @chainable
         *&#x2F;
        undelegateEvents: function() {
            this.$el.unbind(&#x27;.delegateEvents&#x27; + this.id);
            return this;
        },
        &#x2F;**
         * 销毁该页面
         * @method destroy
         *&#x2F;
        destroy: function(){
            this.undelegateEvents();
            this.$el.remove();
        }
    },{
    },{
        &#x2F;**
         通过该方法来继承并扩展一个&#x60;$.EasyTouch.View&#x60;：

            var View = $.EasyTouch.View.extend({
                 tpl: xxx,
                 model: xxx,
                 events: {
                     &#x27;.back&#x27;: {
                        tap: function(){}
                     }
                 },
                 init: function(){

                 }
                 ...
            });

         @method extend
         @param {Object} property property or function add to &#x60;$.EasyTouch.View&#x60;
         @return {Function} the new Class extended from &#x60;$.EasyTouch.View&#x60;
         @static
         **&#x2F;
        extend: function(property){
            property.super = $.EasyTouch.View.prototype;
            var child = $.Base.extend(&#x27;&#x27;, this, property);
            child.extend = this.extend;
            return child;
        }
    });
})();
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
