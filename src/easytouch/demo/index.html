<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="target-densityDpi=device-dpi,width=device-width,user-scalable=no">
    <meta charset="utf-8">
    <title>EasyTouch</title>
    <link rel="stylesheet" href="../../../_assets/highlight.js/styles/default.css">
    <link rel="stylesheet" href="../../css/reset.css">
    <link rel="stylesheet" href="../css/core.css">
    <link rel="stylesheet" href="../css/anim.css">
    <link rel="stylesheet" href="docs.css">
    <script src="../_assets/mustache.js"></script>
    <script src="../../../lib/iscroll/4.2/iscroll-lite.js"></script>
    <script src="../../../_assets/highlight.js/highlight.pack.js"></script>
    <script src="../../core/core.js"></script>
    <script src="../../../lib/zepto/ajax.js"></script>
    <script src="../../core/event.js"></script>
    <script src="../../base/base.js"></script>
    <script src="../../custom-event/custom-event.js"></script>
    <script src="../js/core.js"></script>
    <style type="text/css">
        header{
            background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#222), to(#111));
            color: black;
            text-shadow: 0 1px 0 rgba(255, 255, 255, .1), 0 0 30px rgba(255, 255, 255, .125);
            padding: 0.5em;
            text-align: center;
            margin-bottom: 1em;
            font-size: 1.4em;
            -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);
            font-weight: bold;
        }
        .et-page{
            background-color: #fff;
            height: 100%;
            overflow: hidden;
        }
        .iScroll{
            position: absolute;
            top: 49px;
            bottom: 0;
            left: 0;
            right: 0;
        }
        .scroller{
            padding-bottom: 20px;
            -webkit-box-sizing: border-box;
        }
        .et-listview .et-arrow{
            content: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAMCAYAAABfnvydAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARZJREFUeNpiXLJkiQETE9NqFhaW4////08JCwv7xYAEgHJM9hwcHCr8/PyxfHx8K9atW8eMogCIFwN13+Tk5GQAKgrk5eWdj6yAEWgsw/r166WBkse4uLjkQPwvX77McnV1TYcrAIGNGzeqAK04DFQk8e/fP4bPnz/3ubm5FcMVgMCmTZt0gYoOAK0T+vv3L0hRPQuyfd++fWMAuucvKysrAxsbGwM3Nzc/XAHQuypAye1ApihUaJaNjQ3ECqCkNDMz82GgDkWgFQxAKxabm5vHgVQxq6ioCAEl9wMdpwaSBNJrgI6MlZWV/Q8LqFhgQGkB/Q/SuRUoGW1pafkXZjULIyPjQaDdj4AOOwW0Lg4oiRLUAAEGAHnIXrpvFbnTAAAAAElFTkSuQmCC);
            float: right;
            margin-top: 3px;
        }
        pre{
            margin: 1em;
        }
        button{
            display: block;
            width: 95%;
            margin: 0 auto;
            padding: 0.5em;
        }
    </style>
</head>
<body class="easytouch">
<!--<script seajs="main" src="http://wireless.aliyun-inc.com/easy/lib/seajs/1.2.1/sea-debug.js"></script>-->
<!--<script seajs="seed" src="http://cloud/easy/lib/seajs/1.2.1/seed.js"></script>-->
<!--<script seajs="config">-->
    <!--seajs.config({-->
        <!--base:'js',-->
        <!--alias: {-->
            <!--'easytouch': 'http://cloud/easy/src/easytouch/js/core.js'-->
            <!--//'easytouch': 'http://cloud/easy/src/easytouch/js/core.js'-->
        <!--}-->

    <!--});-->
<!--</script>-->
<script>
    //seajs.use(['easytouch'],function(){
        $(function(){
            var IndexPage = $.EasyTouch.Page.extend({
                html: 'tpl/IndexPage.html',
                render: function(response){
                    console.log('IndexPage render', arguments);
                    return response;
                },
                init: function(params){
                    hljs.initHighlighting();

                    var _this = this;
                    $('#animation-examples li').tap(function(e){
                        _this.app.navPage('AboutPage', {}, this.getAttribute('data-anim'));
                    });

                    $('#navApp').tap(function(e){
                        _this.app.navApp('childapp', {
                            title: 'CodeCola',
                            content: 'Code Cola是一个可视化编辑在线页面css样式的chrome插件。'
                        });
                    });

                    this.app.iScroll(this.el.getElementsByClassName('iScroll')[0], {
                        checkDOMChanges: true
                    });
                }
            });

            var App = $.EasyTouch.extend({
                id: 'app',
                apps: {
                    'childapp': 'childapp.html'
                },
                pages: {
                    "IndexPage": IndexPage,
                    "AboutPage": {
                        html: 'tpl/AboutPage.html',
                        init: function(params){
                            hljs.initHighlighting();
                        }
                    }
                },
                init: function(params){
                    console.log('app init', params);
                    var _this = this;

                    $('.page-back').live('tap', function(e){
                        _this.pageBack({
                            from: 'back'
                        });
                    });

                    _this.bind('beforeNavPage', function(){
                        console.log('[EasyTouch] beforeNavPage', arguments);
                    }, _this);
                    _this.bind('navPage', function(){
                        console.log('[EasyTouch] navPage', arguments);
                    }, _this);
                    _this.bind('beforePageBack', function(){
                        console.log('[EasyTouch] beforePageBack', arguments);
                    }, _this);
                    _this.bind('pageBack', function(){
                        console.log('[EasyTouch] pageBack', arguments);
                    }, _this);
                    _this.bind('beforePageChange', function(){
                        console.log('[EasyTouch] beforePageChange', arguments);
                    }, _this);
                    _this.bind('pageChange', function(){
                        console.log('[EasyTouch] pageChange', arguments);
                    }, _this);
                    _this.bind('navApp', function(){
                        console.log('[EasyTouch] navApp', arguments);
                    }, _this);
                    _this.bind('beforeNavApp', function(){
                        console.log('[EasyTouch] beforeNavApp', arguments);
                    }, _this);
                    _this.bind('loadApp', function(){
                        console.log('[EasyTouch] loadApp', arguments);
                    }, _this);
                    _this.bind('beforeLoadApp', function(){
                        console.log('[EasyTouch] beforeLoadApp', arguments);
                    }, _this);

                    this.history.start({
                        id: 'IndexPage',
                        params: {
                            name: "YouXiao"
                        }
                    });

                },
                iScroll: function(el, params){
                    var iscroll,
                            _params = {
                                onBeforeScrollStart: function(e){
                                    var tagName = e.target.tagName;
                                    if (tagName != 'SELECT' && tagName != 'INPUT' && tagName != 'TEXTAREA'){
                                        e.preventDefault();
                                    }
                                }
                            };
                    params = params || {};
                    if(params.checkDOMChanges){
                        el.addEventListener('touchstart', function(e){
                            if (iscroll.moved || iscroll.zoomed || iscroll.animating || (iscroll.scrollerW == iscroll.scroller.offsetWidth * iscroll.scale && iscroll.scrollerH == iscroll.scroller.offsetHeight * iscroll.scale)) {
                                return;
                            }
                            iscroll.refresh();
                        });
                        delete params.checkDOMChanges;
                    }
                    params = $.extend(_params, params);
                    return iscroll = new iScroll(el, params);
                }
            });
            window.app = new App();
        });
    //});
</script>
</body>
</html>