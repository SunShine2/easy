<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>js\core.js - EasyTouch</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="EasyTouch"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/$.EasyTouch.html">$.EasyTouch</a></li>
            
                <li><a href="..&#x2F;classes/$.EasyTouch.Page.html">$.EasyTouch.Page</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: js\core.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * Easy Touch
 * @author: youxiao@alibaba-inc.com
 * @version: 0.0.1
 * @beta
 *&#x2F;
;(function(){
var
    &#x2F;**
    页面切换完成时促发，包括&lt;code&gt;navPage&lt;&#x2F;code&gt;和&lt;code&gt;pageBack&lt;&#x2F;code&gt;

        var app = new EasyTouch({...});
        app.bind(&#x27;page::change&#x27;, function(e, params){
            var fromPage = this.getPage(params.from);
        }, app);

    @event page::change
    @param {Object} e event object from custom-event
    @param {Object} params
        @param {String} params.from page id of prev page
        @param {String|Undefined} params.to page id of next page
        @param {Object|Undefined} params.params the params when you call &lt;code&gt;navPage&lt;&#x2F;code&gt; or &lt;code&gt;pageBack&lt;&#x2F;code&gt;
        @param {String|Undefined} params.anim the animation name
    **&#x2F;
    EVN_APP_PAGE_CHANGE = &#x27;page::change&#x27;,
    &#x2F;**
    &lt;code&gt;pageBack&lt;&#x2F;code&gt;完成时促发
    @event page::back
    @param {Object} e event object from custom-event
    @param {Object} params
        @param {String} params.from page id of prev page
        @param {String} params.to page id of next page
        @param {Object|Undefined} params.params the params when you call &lt;code&gt;navPage&lt;&#x2F;code&gt; or &lt;code&gt;pageBack&lt;&#x2F;code&gt;
        @param {String|Undefined} params.anim the animation name
    **&#x2F;
    EVN_APP_PAGE_BACK = &#x27;page::back&#x27;,
    &#x2F;**
    &lt;code&gt;navPage&lt;&#x2F;code&gt;完成时促发
    @event page::nav
    @param {Object} e event object from custom-event
    @param {Object} params
        @param {String} params.from page id of prev page
        @param {String} params.to page id of next page
        @param {Object|Undefined} params.params the params when you call &lt;code&gt;navPage&lt;&#x2F;code&gt; or &lt;code&gt;pageBack&lt;&#x2F;code&gt;
        @param {String|Undefined} params.anim the animation name
    **&#x2F;
    EVN_APP_PAGE_NAV = &#x27;page::nav&#x27;,
    &#x2F;**
    &lt;code&gt;navPage&lt;&#x2F;code&gt;开始前促发
    @event page::beforeNav
    @param {Object} e event object from custom-event
    @param {Object} params
        @param {String} params.from page id of prev page
        @param {String|Undefined} params.to page id of next page
        @param {Object|Undefined} params.params the params when you call &lt;code&gt;navPage&lt;&#x2F;code&gt; or &lt;code&gt;pageBack&lt;&#x2F;code&gt;
        @param {String|Undefined} params.anim the animation name
    **&#x2F;
    EVN_APP_BEFORE_PAGE_NAV = &#x27;page::beforeNav&#x27;,
    &#x2F;**
    &lt;code&gt;navPage&lt;&#x2F;code&gt;或者&lt;code&gt;pageBack&lt;&#x2F;code&gt;开始前促发
    @event page::beforeChange
    @param {Object} e event object from custom-event
    @param {Object} params
        @param {String} params.from page id of prev page
        @param {String|Undefined} params.to page id of next page
        @param {Object|Undefined} params.params the params when you call &lt;code&gt;navPage&lt;&#x2F;code&gt; or &lt;code&gt;pageBack&lt;&#x2F;code&gt;
        @param {String|Undefined} params.anim the animation name
    **&#x2F;
    EVN_APP_BEFORE_PAGE_CHANGE = &#x27;page::beforeChange&#x27;,
    &#x2F;**
    &lt;code&gt;pageBack&lt;&#x2F;code&gt;开始前促发
    @event page::beforeBack
    @param {Object} e event object from custom-event
    @param {Object} params
        @param {String} params.from page id of prev page
        @param {String} params.to page id of next page
        @param {Object|Undefined} params.params the params when you call &lt;code&gt;navPage&lt;&#x2F;code&gt; or &lt;code&gt;pageBack&lt;&#x2F;code&gt;
        @param {String|Undefined} params.anim the animation name
    **&#x2F;
    EVN_APP_BEFORE_PAGE_BACK = &#x27;page::beforeBack&#x27;,
    EVN_PAGE_LEAVE = &#x27;leave&#x27;,
    EVN_PAGE_READY = &#x27;ready&#x27;,
    CLASS_APP = &#x27;easytouch&#x27;,
    CLASS_PREFIX = &#x27;et-&#x27;,
    SESSION_HISTORY = &#x27;easytouch::page_history&#x27;,
    REGEX_HTML_ADRESS = &#x2F;^[\S]+\.html$&#x2F;i,
    REGEX_SELECTOR = &#x2F;^[a-zA-Z0-9\.#&gt;\[\]&#x27;&quot;=\s~\*\+:\(\)\-\$\^]+$&#x2F;i;

var reverseAnimation = function(animation, regex){
    var _reverse = function(anim){
        var opposites={
            &#x27;Up&#x27; : &#x27;Down&#x27;,
            &#x27;Down&#x27; : &#x27;Up&#x27;,
            &#x27;Left&#x27; : &#x27;Right&#x27;,
            &#x27;Right&#x27; : &#x27;Left&#x27;,
            &#x27;In&#x27; : &#x27;Out&#x27;,
            &#x27;Out&#x27; : &#x27;In&#x27;
        };
        return opposites[anim] || anim;
    };
    regex = regex || &#x2F;Left|Right|Up|Down|In|Out&#x2F;g;
    return animation.replace(regex, _reverse);
};

&#x2F;**
Touch UI Library for Easy, Examples:

    var Page1 = $.EasyTouch.Page.extend({
        el: &#x27;#xxx .xxx&#x27;,
        init: function(){},
        reset: function(){}
    });

    &#x2F;&#x2F;you can new a $.EasyTouch
    new $.EasyTouch({
        pages: {
            &#x2F;&#x2F;class inherit from $.EasyTouch.Page
            &quot;Page1&quot;: Page1,

            &#x2F;&#x2F;get html from el
            &#x2F;&#x2F;html file
            &quot;Page2&quot;: {
                el: &#x27;xxx.html&#x27;
            },
            &#x2F;&#x2F;css selector
            &quot;Page3&quot;: {
                el: &#x27;#xxx&#x27;
            },
            &#x2F;&#x2F;HTML Element
            &quot;Page4&quot;: {
                el: document.getElementById(&#x27;xxx&#x27;)
            },
            &#x2F;&#x2F;Zepto
            &quot;Page5&quot;: {
                el: $(&#x27;#xxx&#x27;)
            },

            &#x2F;&#x2F;get template from tpl, parse the template in the function of &lt;code&gt;parse&lt;&#x2F;code&gt;
            &quot;Page6&quot;: {
                tpl: &#x27;xxx.html&#x27;
            },
            &quot;Page7&quot;: {
                tpl: &#x27;#xxx&#x27;
            },
            &quot;Page8&quot;: {
                tpl: document.getElementById(&#x27;xxx&#x27;)
            },
            &quot;Page9&quot;: {
                tpl: $(&#x27;#xxx&#x27;)
            }
        },
        &#x2F;&#x2F;this function will run will new
        init: function(params){},
        &#x2F;&#x2F;for YunOS resume event
        resume: function(){},
        &#x2F;&#x2F;for YunOS suspend event
        pause: function(){}
    });

Or you can extend a EasyTouch, like this:

    var App = $.EasyTouch.extend({
        el: &#x27;xxx&#x27;,
        init: xxx
        ...
    });
    new App();

@class $.EasyTouch
@param {Object} options
    @param {Object|Class} options.pages 页面配置：
        如果是一个Object，EasyTouch会调用&lt;code&gt;$.EasyTouch.extend&lt;&#x2F;code&gt;，将这个Object作为prototype属性扩展出一个Page；
        如果是一个Class，则将直接使用该类作为一个Page；
        @param {HTMLElement|Node|String} options.pages.el &lt;code&gt;el&lt;&#x2F;code&gt;和&lt;code&gt;tpl&lt;&#x2F;code&gt;属性二选一，&lt;code&gt;el&lt;&#x2F;code&gt;将一个节点作为一个页面，它可以是：原生的dom节点、Zepto对象、选择器、一个本地或远程的html文件（如http:&#x2F;&#x2F;xxx.com&#x2F;xxx.html）
        @param {HTMLElement|Node|String} options.pages.tpl 将一个模板作为一个页面，它可以是：原生的dom节点、Zepto对象、选择器、一个本地或远程的html文件（如tpl&#x2F;xxx.html），对于前三者，EasyTouch会将它们的&lt;code&gt;innerHTML&lt;&#x2F;code&gt;作为模板，可以在&lt;code&gt;parse&lt;&#x2F;code&gt;方法中使用任意模板引擎渲染改模板
@constructor
**&#x2F;
$.EasyTouch = function(options){
    console.log(&#x27;[EasyTouch] initializer&#x27;, options);

    var _this = this;
    $.extend(this, options);
    this.el = typeof this.el === &#x27;string&#x27;?$(this.el):this.el;
    this.el.addClass(CLASS_APP);
    this.history = this.history();

    &#x2F;&#x2F;yunos event
    $(document).bind(&#x27;resume&#x27;, function(e){
        _this.resume();
    }).bind(&#x27;pause&#x27;, function(e){
        _this.pause();
    }).bind(&#x27;backbutton&#x27;, function(e){
        _this.pageBack();
    }).bind(&#x27;resetbutton&#x27;, function(e){
        _this.reset();
    });

    &#x2F;&#x2F;page的离开事件
    this.bind(EVN_APP_PAGE_CHANGE, function(e, params){
        if(params.from){
            this.getPage(params.from).trigger(&#x27;leave&#x27;);
        }
    }, this);

    this.init(options);
};
$.Base.extend($.EasyTouch, {
    &#x2F;**
     * 容器
     * @property el
     * @type HTMLElement|Node|String
     * @default &#x27;body&#x27;
     * @optional
     *&#x2F;
    el: &#x27;body&#x27;,
    &#x2F;**
     * Page原型
     * @property pages
     * @type Object
     * @required
     *&#x2F;
    pages: {},

    &#x2F;**
     * Page实例
     * @property _pages
     * @type Object
     * @private
     *&#x2F;
    _pages: {},
    &#x2F;**
     * 页面跳转的历史记录
     * @property _history
     * @type Array
     * @private
     *&#x2F;
    _history: [],
    &#x2F;**
     * EasyTouch初始化
     * @method init
     * @param {Object} options
     *&#x2F;
    init: function(options){
        console.log(&#x27;[EasyTouch] init&#x27;, arguments);
    },
    &#x2F;**
     * YunOS的resume事件监听
     * @method resume
     *&#x2F;
    resume: function(){
        console.log(&#x27;[EasyTouch] resume&#x27;, arguments);
    },
    &#x2F;**
     * YunOS的pause事件监听
     * @method pause
     *&#x2F;
    pause: function(){
        console.log(&#x27;[EasyTouch] pause&#x27;, arguments);
    },
    &#x2F;**
     * 重置应用
     * @method reset
     *&#x2F;
    reset: function(){
        console.log(&#x27;[EasyTouch] reset&#x27;);
        if(!this._history.length){
            return;
        }
        this.navPage(this._history[0].id, this._history[0].params);
    },
    &#x2F;**
    页面跳转

        app.navPage(&#x27;DetailPage&#x27;, {
            title: &#x27;MacBook Air&#x27;,
            desc: &#x27;...&#x27;
        }, &#x27;sliderRightIn&#x27;, -1);

    @method navPage
    @param {String} id page id
    @param {Object} params params for next page
    @param {String} anim animation name, contain:

    *   slideRightIn
    *   slideLeftIn
    *   slideUpIn
    *   slideDownIn
    *   fadeIn
    *   dissolveIn
    *   popIn
    *   flipLeftIn
    *   flipRightIn
    *   swapLeftIn
    *   swapRightIn
    *   cubeLeftIn
    *   cubeRightIn

    include the animation css in your less file like this:
&lt;pre class=&quot;code&quot;&gt;&lt;code&gt;@import &lt;span class=&quot;str&quot;&gt;&quot;easytouch&#x2F;less&#x2F;anim.less&quot;&lt;&#x2F;span&gt;;
     &lt;span class=&quot;com&quot;&gt;
    &#x2F;&#x2F;Notice: When the slideRightIn included, the slideLeftOut is also ready.
    &#x2F;&#x2F;The same, when you include slideLeftOut, slideRightIn is ready too.
    &#x2F;&#x2F;All the animation function has two params: &quot;duration&quot; and &quot;function&quot;.&lt;&#x2F;span&gt;
    &lt;span style=&quot;color:#30418C&quot;&gt;.easytouch&lt;&#x2F;span&gt; &gt; &lt;span style=&quot;color:#30418C&quot;&gt;.anim-slideRightIn&lt;&#x2F;span&gt;(&lt;span class=&quot;lit&quot;&gt;.6&lt;&#x2F;span&gt;s, &lt;span class=&quot;str&quot;&gt;ease-in&lt;&#x2F;span&gt;);
&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;

    @param {Boolean} ifPushToHistory if push rhe page to history
    **&#x2F;
    navPage: function(id, params, anim, ifPushToHistory){
        console.log(&#x27;[EasyTouch] navPage&#x27;, arguments);

        var currentPage = this.getCurrentPage();
        if(currentPage &amp;&amp; currentPage.id === id){
            return;
        }

        var _this = this,
            _params = $.extend({}, params),
            eventArgus = {
                from: currentPage?currentPage.id:undefined,
                to: id,
                params: params,
                anim: anim
            },
            pushHistory = function(id, params, anim, ifPushToHistory){
                if(!ifPushToHistory){
                    return;
                }
                this.history.push({
                    id: id,
                    params: params,
                    anim: anim
                });
            },
            trigger = function(){
                pushHistory.apply(_this, [id, params, anim, ifPushToHistory !== false]);
                _this.trigger(EVN_APP_PAGE_NAV, [eventArgus]);
                _this.trigger(EVN_APP_PAGE_CHANGE, [eventArgus]);
            };
        this.trigger(EVN_APP_BEFORE_PAGE_NAV, [eventArgus]);
        this.trigger(EVN_APP_BEFORE_PAGE_CHANGE, [eventArgus]);
        if(!this._pages[id]){
            _this._createPage(id, _params, function(){
                _this._navPage(currentPage, _this._pages[id], anim, trigger);
            });
        }else{
            this._pages[id].reset(_params);
            _this._navPage(currentPage, this._pages[id], anim, trigger);
        }
    },
    &#x2F;**
    返回到上一个页面

        app.pageBack({
            id: xxx
        }, &#x27;popIn&#x27;);

    @method pageBack
    @param {Object} params params for next page
    @param {String} anim animation name, as same as &lt;code&gt;navPage&lt;&#x2F;code&gt;
    **&#x2F;
    pageBack: function(params, anim){
        console.log(&#x27;[EasyTouch] pageBack&#x27;, arguments);
        if(this._history.length &lt;= 1){
            &#x2F;&#x2F;TODO: exitApp
            return;
        }

        var _this = this,
            _params,
            currentPage = _this.getCurrentPage(),
            preRecord = this._history[this._history.length - 2],
            lastRecord = this._history[this._history.length - 1],
            id = preRecord.id,
            eventArgus,
            trigger = function(){
                _this.history.pop();
                _this.trigger(EVN_APP_PAGE_BACK, [eventArgus]);
                _this.trigger(EVN_APP_PAGE_CHANGE, [eventArgus]);
            };

        &#x2F;&#x2F;如果没有初始化过该页面，说明来至单页面刷新，获取缓存中的params
        params = (this._pages[id] ? params : preRecord.params) || {};
        anim = anim || lastRecord.anim;
        anim = anim?reverseAnimation(anim, &#x2F;Left|Right|Up|Down&#x2F;g):null;
        eventArgus = {
            from: lastRecord.id,
            to: preRecord.id,
            params: params,
            anim: anim
        };

        this.trigger(EVN_APP_BEFORE_PAGE_BACK, [eventArgus]);
        this.trigger(EVN_APP_BEFORE_PAGE_CHANGE, [eventArgus]);

        _params = $.extend({}, params);
        if(!this._pages[id]){
            this._createPage(id, _params, function(){
                _this._navPage(currentPage, _this._pages[id], anim, trigger);
            });
        }else{
            this._pages[id].reset(_params);
            this._navPage(currentPage, this._pages[id], anim, trigger);
        }
    },
    &#x2F;**
     * 页面切换效果
     * @method _navPage
     * @param {Object} fromPage
     * @param {Object} toPage
     * @param {String} anim animation name
     * @param {Function} callback
     * @private
     *&#x2F;
    _navPage: function(fromPage, toPage, anim, callback){
        if(!fromPage){
            toPage.el.show();
            callback &amp;&amp; callback();
            return;
        }
        if(anim){
            anim = CLASS_PREFIX + anim;
            var reverseClass = reverseAnimation(anim),
                c_class = CLASS_PREFIX + &#x27;current&#x27;;
            fromPage.el.removeClass(c_class).addClass(reverseClass);
            toPage.el.bind(&#x27;webkitAnimationEnd&#x27;, function(){
                toPage.el.unbind(&#x27;webkitAnimationEnd&#x27;).removeClass(anim);
                fromPage.el.hide().removeClass(reverseClass);
                callback &amp;&amp; callback();
            }).addClass(c_class).addClass(anim).show();
        }else{
            fromPage.el.hide();
            toPage.el.show();
            callback &amp;&amp; callback();
        }
    },
    &#x2F;**
     * 初始化一个Page类
     * @method _createPage
     * @param {String} id page id
     * @param {Object} params params for next page
     * @param {Function} callback
     * @private
     *&#x2F;
    _createPage: function(id, params, callback){
        if(typeof this.pages[id] !== &#x27;function&#x27;){
            this.pages[id] = $.EasyTouch.Page.extend(this.pages[id]);
        }
        this._pages[id] = new this.pages[id](id, params, this);

        if(!callback){
            return;
        }
        if(this._pages[id]._ready){
            callback();
        }else{
            this._pages[id].bind(EVN_PAGE_READY, callback);
        }
    },
    &#x2F;**
    向App添加一个页面

        app.addPage(&#x27;DetailPage&#x27;, {
            el: &#x27;#DetailPage&#x27;
        });

    @method addPage
    @param id page id
    @param {String|Object} params
    **&#x2F;
    addPage: function(id, params){
        this.pages[id] = params;
    },
    &#x2F;**
    通过页面ID获取某一个页面的引用

        app.getPage(&#x27;DetailPage&#x27;);

    @method getPage
    @param {String} id page id
    @return {Object} the instance of page
    **&#x2F;
    getPage: function(id){
        return this._pages[id];
    },
    &#x2F;**
     * 获取当前页面的引用
     * @method getCurrentPage
     * @return {Object} the instance of page
     *&#x2F;
    getCurrentPage: function(){
        return this._history.length?this._pages[this._history[this._history.length - 1].id]:null;
    },
    &#x2F;**
     * 获取当前页面的ID
     * @method getCurrentPID
     * @return {String} the page id
     *&#x2F;
    getCurrentPID: function(){
        return this._history.length?this._history[this._history.length - 1].id:null;
    },
    history: function(){
        var _this = this, useHistory;
        if(sessionStorage.getItem(SESSION_HISTORY)){
            this._history = JSON.parse(sessionStorage.getItem(SESSION_HISTORY));
        }
        return {
            &#x2F;**
            启用单页面刷新功能, 并开始记录页面跳转, 如果存在历史记录, 则跳转至最后一条历史记录, 反之跳转至params中指定的页面

                app.history.start({
                    id: &#x27;IndexPage&#x27;,
                    params: {
                        name: &#x27;YouXiao&#x27;
                    }
                })

            @method history.start
            @param {Object} params data to call navPage when the history is empty
                 @param {String} params.id page id
                 @param {Object} params.params params for the default page
            **&#x2F;
            start: function(params){
                useHistory = true;
                if(_this._history.length){
                    var record = _this._history[_this._history.length - 1];
                    _this.navPage(record.id, record.params);
                }else{
                    _this.navPage(params.id, params.params);
                }
            },
            &#x2F;**
             * 从尾部删除一条历史记录,并写入&lt;code&gt;sessionStorage&lt;&#x2F;code&gt;
             * @method history.pop
             *&#x2F;
            pop: function(){
                _this._history.pop();
                _this.history.save();
            },
            &#x2F;**
             * 增加一条历史记录,并写入&lt;code&gt;sessionStorage&lt;&#x2F;code&gt;
             * @method history.add
             * @param {Object} record
             *      @param {String} record.id page id
             *      @param {Object} record.params params for navPage
             *      @param {String} record.anim the animation name
             *&#x2F;
            push: function(record){
                var lastPID = _this.getCurrentPID(),
                    firstPID = _this._history.length &amp;&amp; _this._history[0].id;
                if(record.id !== lastPID &amp;&amp; record.id !== firstPID){
                    _this._history.push(record);
                }
                if(record.id === firstPID){
                    _this._history.length = 1;
                }
                _this.history.save();
            },
            &#x2F;**
             * 将内存中的历史记录写入&lt;code&gt;sessionStorage&lt;&#x2F;code&gt;
             * @method history.save
             *&#x2F;
            save: function(){
                if(!useHistory){
                    return;
                }
                sessionStorage.setItem(SESSION_HISTORY, JSON.stringify(_this._history));
            }
        }
    }
},{
},{
    &#x2F;**
     * 通过该方法来继承并扩展一个&lt;code&gt;$.EasyTouch&lt;&#x2F;code&gt;
     * @method $.EasyTouch.extend
     * @param {Object} property property or function add to &lt;code&gt;$.EasyTouch&lt;&#x2F;code&gt;
     * @return {Function} the new Class extended from &lt;code&gt;$.EasyTouch&lt;&#x2F;code&gt;
     * @static
     *&#x2F;
    extend: function(property){
        var easytouch_app = function(){
            $.EasyTouch.apply(this, arguments);
        };
        easytouch_app.prototype.__proto__ = $.EasyTouch.prototype;
        $.extend(easytouch_app.prototype, property);
        return easytouch_app;
    }
});


&#x2F;**
页面类，该类不需要应用自己实例化，EasyTouch会在&lt;code&gt;navPage&lt;&#x2F;code&gt;时判断是否实例化了该页面，如果没有会自动实例化，
应用可以通过&lt;code&gt;$.EasyTouch.Page.extend&lt;&#x2F;code&gt;方法创建一个新的Page类
@class $.EasyTouch.Page
@param {String} id page id
@param {Object} params property add to &lt;code&gt;$.EasyTouch.Page&lt;&#x2F;code&gt;
@param {Object} app the instance of &lt;code&gt;$.EasyTouch&lt;&#x2F;code&gt;, the page is in which app
@constructor
 **&#x2F;
$.EasyTouch.Page = function(id, params, app){
    console.log(&#x27;[EasyTouch.Page] &#x27;+id+&#x27; initializer&#x27;, arguments);

    this._app = app;
    var _this = this,
        _init = function(el){
            el.attr(&#x27;id&#x27;, id);
            el.addClass(CLASS_PREFIX + &#x27;page&#x27;);
            _this._app.el.append(el);
            _this.el = el;
            _this.id = id;
            _this.init(params);
            _this._ready = true;
            _this.trigger(EVN_PAGE_READY);
        };

    this.bind(EVN_PAGE_LEAVE, function(e){
        _this.leave();
    });

    if(this.el){
        if(REGEX_HTML_ADRESS.test(this.el)){
            $.get(this.el, function(response){
                _init(_this.render($(response), params));
            });
        }else if(typeof this.el === &#x27;string&#x27; || this.el.tagName){
            _init(_this.render($(this.el), params));
        }else{
            _init(_this.render(this.el, params));
        }
    }else if(this.tpl){
        if(REGEX_HTML_ADRESS.test(this.tpl)){
            $.get(this.tpl, function(response, status){
                response = _this.parse(response, params);
                _init(_this.render($(response)));
            });
        }else if(REGEX_SELECTOR.test(this.tpl) || this.tpl.tagName){
            _init(_this.render($(_this.parse($(this.tpl).html(), params)), params));
        }else if(this.tpl.attr){
            _init(_this.render($(_this.parse(this.tpl.html(), params)), params));
        }else{
            _init(_this.render($(_this.parse(this.tpl, params)), params));
        }
    }else{
        console.error(&#x27;el or tpl param is require&#x27;);
    }
};
$.Base.extend($.EasyTouch.Page, {
    &#x2F;**
     * 当页面作为一个模板被加入App前,可以通过该方法渲染模板,默认原样返回
     * @method parse
     * @param {String} template the html before parse
     * @param {Object} params the params from &lt;code&gt;navPage&lt;&#x2F;code&gt;
     * @return {String} the html after parse
     *&#x2F;
    parse: function(template, params){
        console.log(&#x27;[EasyTouch.Page] parse&#x27;);
        return template;
    },
    &#x2F;**
     * 在页面节点被加入App前,可以通过改方法修改Dom,默认原样返回
     * @method render
     * @param {Object} $el the $dom before render
     * @param {Object} params the params from &lt;code&gt;navPage&lt;&#x2F;code&gt;
     * @return {Object} the $dom after render
     *&#x2F;
    render: function($el, params){
        console.log(&#x27;[EasyTouch.Page] render&#x27;, arguments);
        return $el;
    },
    &#x2F;**
     * 页面第一次被访问时会执行该方法
     * @method init
     * @param {Object} params the params from &lt;code&gt;navPage&lt;&#x2F;code&gt;
     *&#x2F;
    init: function(params){
        console.log(&#x27;[EasyTouch.Page] &#x27;+this.id+&#x27; init&#x27;, arguments);
    },
    &#x2F;**
     * 页面每一次被访问时都会执行该方法
     * @method reset
     * @param {Object} params the params from &lt;code&gt;navPage&lt;&#x2F;code&gt;
     *&#x2F;
    reset: function(params){
        console.log(&#x27;[EasyTouch.Page] &#x27;+this.id+&#x27; reset&#x27;, arguments);
    },
    &#x2F;**
     * 每一次离开页面后执行该方法
     * @method leave
     *&#x2F;
    leave: function(){
        console.log(&#x27;[EasyTouch.Page] &#x27;+this.id+&#x27; leave&#x27;);
    }
},{
},{
    &#x2F;**
    通过该方法来继承并扩展一个&lt;code&gt;$.EasyTouch.Page&lt;&#x2F;code&gt;

        var Page1 = $.EasyTouch.Page.extend({
            &#x2F;&#x2F;set el or tpl property, examples in $.EasyTouch example
            el: &#x27;#Page1&#x27;,
            &#x2F;&#x2F;el: document.getElementById(&#x27;#Page1&#x27;),
            &#x2F;&#x2F;el: $(&#x27;#Page1&#x27;),
            &#x2F;&#x2F;el: &#x27;pages&#x2F;Page1.html&#x27;,

            &#x2F;&#x2F;tpl: &#x27;#Page1&#x27;,
            &#x2F;&#x2F;tpl: document.getElementById(&#x27;#Page1&#x27;),
            &#x2F;&#x2F;tpl: $(&#x27;#Page1&#x27;),
            &#x2F;&#x2F;tpl: &#x27;pages&#x2F;Page1.html&#x27;,

            parse: function(template, params){
                return Mustache.to_html(template, params);
            },
            render: function($el, params){
                $el.find(&#x27;#title&#x27;).text(params.title);
                return $el;
            },
            init: function(){

            },
            reset: function(){

            },
            leave： function(){

            }
        });

    @method $.EasyTouch.Page.extend
    @param {Object} property property or function add to &lt;code&gt;$.EasyTouch.Page&lt;&#x2F;code&gt;
    @return {Function} the new Class extended from &lt;code&gt;$.EasyTouch.Page&lt;&#x2F;code&gt;
    @static
     **&#x2F;
    extend: function(property){
        var easytouch_page = function(){
            $.EasyTouch.Page.apply(this, arguments);
        };
        easytouch_page.prototype.__proto__ = $.EasyTouch.Page.prototype;
        $.extend(easytouch_page.prototype, property);
        return easytouch_page;
    }
});
})();
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
